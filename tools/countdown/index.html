<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Countdown</title>
  <style>
    * { box-sizing: border-box; }
    body, input { -webkit-user-select: text; user-select: text; font-family: system-ui, sans-serif; }
    body { margin: 0; padding: 1rem; background: #fff; color: #1a1a1a; font-size: 0.95rem; }
    h1 { font-size: 1.25rem; margin: 0 0 0.5rem 0; }
    label { display: block; margin-bottom: 0.25rem; font-weight: 500; }
    .row { margin-bottom: 1rem; }
    input[type="date"], input[type="time"] { padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; }
    input:focus { outline: none; border-color: #1a73e8; }
    .input-row { display: flex; align-items: baseline; gap: 0.75rem; flex-wrap: wrap; }
    .note { font-size: 0.85rem; color: #555; margin-top: 0.25rem; }
    .countdown-block { margin-top: 1.25rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0; }
    .countdown-block.past { background: #fff5f5; border-color: #fcc; }
    .countdown-block.empty { background: #f5f5f5; border-color: #eee; }
    .countdown-summary { font-size: 1.1rem; font-weight: 500; margin-bottom: 0.75rem; }
    .countdown-summary.empty { color: #999; font-weight: normal; }
    .countdown-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 0.5rem; }
    .countdown-item { background: #fff; border-radius: 6px; padding: 0.5rem 0.65rem; text-align: center; border: 1px solid #eee; }
    .countdown-item .value { font-family: ui-monospace, monospace; font-size: 1.25rem; font-weight: 600; display: block; }
    .countdown-item .unit { font-size: 0.75rem; color: #666; }
  </style>
</head>
<body>
  <h1>Countdown</h1>
  <p style="margin: 0 0 1rem 0; font-size: 0.9rem; color: #555;">Set a target date and time. The countdown updates every second.</p>

  <div class="row">
    <label for="targetDate">Target date</label>
    <div class="input-row">
      <input type="date" id="targetDate" />
      <input type="time" id="targetTime" value="00:00" step="1" />
    </div>
    <p class="note">Leave time at 00:00:00 for midnight. Uses your local time zone.</p>
  </div>

  <div class="countdown-block empty" id="countdownBlock">
    <div class="countdown-summary empty" id="countdownSummary">Pick a date and time above.</div>
    <div class="countdown-grid" id="countdownGrid"></div>
  </div>

  <script>
(function () {
  var targetDateEl = document.getElementById('targetDate');
  var targetTimeEl = document.getElementById('targetTime');
  var countdownBlock = document.getElementById('countdownBlock');
  var countdownSummary = document.getElementById('countdownSummary');
  var countdownGrid = document.getElementById('countdownGrid');

  var UNITS = [
    { key: 'seconds', label: 'Seconds', format: function (ms) { return Math.floor(ms / 1000); } },
    { key: 'minutes', label: 'Minutes', format: function (ms) { return Math.floor(ms / 60000); } },
    { key: 'hours', label: 'Hours', format: function (ms) { return Math.floor(ms / 3600000); } },
    { key: 'days', label: 'Days', format: function (ms) { return Math.floor(ms / 86400000); } },
    { key: 'weeks', label: 'Weeks', format: function (ms) { return Math.floor(ms / 604800000); } }
  ];

  function buildGrid() {
    countdownGrid.innerHTML = '';
    UNITS.forEach(function (u) {
      var div = document.createElement('div');
      div.className = 'countdown-item';
      div.innerHTML = '<span class="value" data-key="' + u.key + '">—</span><span class="unit">' + u.label + '</span>';
      countdownGrid.appendChild(div);
    });
  }

  function getTargetMs() {
    var d = (targetDateEl.value || '').trim();
    var t = (targetTimeEl.value || '00:00').trim();
    if (!d) return null;
    if (t.split(':').length === 2) t = t + ':00';
    var date = new Date(d + 'T' + t);
    return isNaN(date.getTime()) ? null : date.getTime();
  }

  function formatSummary(ms, past) {
    var abs = Math.abs(ms);
    var sec = Math.floor(abs / 1000) % 60;
    var min = Math.floor(abs / 60000) % 60;
    var hr = Math.floor(abs / 3600000) % 24;
    var day = Math.floor(abs / 86400000);
    var parts = [];
    if (day > 0) parts.push(day + ' day' + (day !== 1 ? 's' : ''));
    if (hr > 0) parts.push(hr + ' hr');
    if (min > 0) parts.push(min + ' min');
    if (sec > 0 || parts.length === 0) parts.push(sec + ' sec');
    var text = parts.join(', ');
    return past ? 'Target was ' + text + ' ago' : text + ' until target';
  }

  function tick() {
    var targetMs = getTargetMs();
    if (targetMs === null) {
      countdownBlock.className = 'countdown-block empty';
      countdownSummary.textContent = 'Pick a date and time above.';
      countdownSummary.className = 'countdown-summary empty';
      UNITS.forEach(function (u) {
        var el = countdownGrid.querySelector('[data-key="' + u.key + '"]');
        if (el) el.textContent = '—';
      });
      return;
    }

    var now = Date.now();
    var diff = targetMs - now;
    var past = diff < 0;
    var absMs = Math.abs(diff);

    countdownSummary.textContent = formatSummary(diff, past);
    countdownSummary.className = 'countdown-summary';
    countdownBlock.className = 'countdown-block' + (past ? ' past' : '');

    UNITS.forEach(function (u) {
      var el = countdownGrid.querySelector('[data-key="' + u.key + '"]');
      if (el) el.textContent = String(u.format(absMs));
    });
  }

  function setDefaultDate() {
    if (targetDateEl.value) return;
    var d = new Date();
    d.setDate(d.getDate() + 1);
    targetDateEl.value = d.toISOString().slice(0, 10);
  }

  buildGrid();
  setDefaultDate();
  tick();
  setInterval(tick, 1000);
  targetDateEl.addEventListener('change', tick);
  targetTimeEl.addEventListener('change', tick);
  targetTimeEl.addEventListener('input', tick);
})();
  </script>
</body>
</html>
